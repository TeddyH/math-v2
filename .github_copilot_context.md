# 두뇌 트레이닝: 초등수학 앱 개발 컨텍스트

## 프로젝트 정보
- **프로젝트명**: 두뇌 트레이닝: 초등수학
- **회사명**: tenspoon
- **패키지명**: com.tenspoon.mathtraining
- **개발 루트 디렉토리**: /Volumes/Data2TB/git-project/math-v2

## 프로젝트 개요
초등학생이 수학을 쉽게 익힐 수 있는 Flutter 기반 모바일 앱

## 기술 스택
- **프레임워크**: Flutter (Android + iOS)
- **상태관리**: Provider 또는 Riverpod
- **로컬 스토리지**: SharedPreferences, Hive
- **랭킹 시스템**: 
  - Android: Google Play Games Services (Leaderboards)
  - iOS: Game Center Leaderboards
- **애니메이션**: Flutter Animation API
- **UI/UX**: Material Design 3, Cupertino

## 앱 구조 (4개 주요 화면)

### 1. 로그인 화면 (LoginScreen)
```
사용자 정보 입력:
- 학교명 (텍스트 필드)
- 학년 (드롭다운: 1학년~6학년)
- 이름/별명 (텍스트 필드)

로그인 후 상단 AppBar에 정보 표시
```

### 2. 게임 모드 선택 화면 (GameModeScreen)
```
두 가지 게임 모드:
1. 클래식 모드
2. 비행기 게임 모드
```

### 3. 클래식 게임 화면 (ClassicGameScreen)
```
게임 설정:
- 방식 선택: 덧셈(+), 뺄셈(-), 곱셈(×), 나눗셈(÷), 랜덤
- 연산 난이도: 한자리 수, 두자리 수, 세자리 수
- 시간 제한 없음
- 틀리면 게임 종료
- 점수 계산: 방식 + 난이도별 가점
```

### 4. 비행기 게임 화면 (AirplaneGameScreen)
```
게임플레이:
- 플레이어: 비행기 조종 (좌우 이동)
- 조작: 키보드 방향키, 터치 드래그
- 오브젝트: 정답 1개 + 오답 2개 (위에서 떨어짐)
- 배경요소: 구름, 새, 기타 장식 요소
- UI: 상단에 플레이어 정보 + 현재 점수
- 게임 종료: 오답 충돌 시
```

### 5. 랭킹 화면 (LeaderboardScreen)
```
랭킹 분류:
- 클래식 게임 랭킹
- 비행기 게임 랭킹
- 표시 정보: 학교, 학년, 이름, 점수
```

## 주요 기능 구현

### 점수 시스템
```dart
class ScoreCalculator {
  // 방식별 기본 점수
  static const Map<OperationType, int> operationScore = {
    OperationType.addition: 10,
    OperationType.subtraction: 15,
    OperationType.multiplication: 20,
    OperationType.division: 25,
    OperationType.random: 30,
  };
  
  // 난이도별 배수
  static const Map<Difficulty, double> difficultyMultiplier = {
    Difficulty.oneDigit: 1.0,
    Difficulty.twoDigit: 1.5,
    Difficulty.threeDigit: 2.0,
  };
}
```

### 문제 생성 로직
```dart
class MathProblem {
  final int operand1;
  final int operand2;
  final OperationType operation;
  final int correctAnswer;
  final List<int> wrongAnswers;
  
  // 난이도별 숫자 범위 생성
  // 정답 1개 + 오답 2개 생성 로직
}
```

### 게임 상태 관리
```dart
class GameState {
  final UserInfo user;
  final int currentScore;
  final int currentLevel;
  final bool isGameActive;
  final GameMode mode;
}
```

### 플랫폼별 랭킹 구현
```dart
// Android: Google Play Games Services
class AndroidLeaderboard {
  // Google Play Games Services 연동
  // Leaderboard 제출/조회
}

// iOS: Game Center
class IOSLeaderboard {
  // Game Center 연동
  // Leaderboard 제출/조회
}
```

## 파일 구조
```
lib/
├── main.dart
├── models/
│   ├── user_info.dart
│   ├── math_problem.dart
│   ├── game_state.dart
│   └── score.dart
├── screens/
│   ├── login_screen.dart
│   ├── game_mode_screen.dart
│   ├── classic_game_screen.dart
│   ├── airplane_game_screen.dart
│   └── leaderboard_screen.dart
├── widgets/
│   ├── custom_app_bar.dart
│   ├── game_button.dart
│   ├── airplane_widget.dart
│   ├── falling_answer.dart
│   └── background_elements.dart
├── services/
│   ├── score_calculator.dart
│   ├── problem_generator.dart
│   ├── leaderboard_service.dart
│   └── local_storage_service.dart
├── providers/
│   ├── game_provider.dart
│   ├── user_provider.dart
│   └── leaderboard_provider.dart
└── utils/
    ├── constants.dart
    ├── enums.dart
    └── animations.dart
```

## 디자인 가이드라인
- **색상**: 초등학생 친화적인 밝고 활기찬 색상
- **폰트**: 가독성 좋은 큰 글씨체
- **아이콘**: 직관적이고 친숙한 아이콘
- **애니메이션**: 부드럽고 재미있는 전환 효과

## 개발 우선순위
1. 기본 UI/UX 구조 (로그인, 메뉴)
2. 클래식 게임 로직 구현
3. 점수 계산 및 로컬 저장
4. 비행기 게임 구현
5. 랭킹 시스템 (플랫폼별)
6. 애니메이션 및 디자인 개선

## 성능 고려사항
- Flutter 위젯 최적화
- 메모리 사용량 관리 (특히 비행기 게임)
- 배터리 효율성
- 부드러운 애니메이션 처리

## 테스트 전략
- 단위 테스트: 점수 계산, 문제 생성 로직
- 위젯 테스트: 주요 화면 및 상호작용
- 통합 테스트: 전체 게임 플로우
- 플랫폼별 테스트: Android/iOS 랭킹 기능

## iOS 랭킹 시스템 제안
Game Center를 사용하는 것을 권장합니다:
- Apple의 공식 게임 서비스
- 자동 친구 연결 및 도전 기능
- 무료 사용 가능
- Flutter plugin: `games_services` 패키지 활용

## 추가 고려사항
- 오프라인 모드 지원
- 학습 진도 추적
- 부모/교사용 대시보드 (선택사항)
- 다국어 지원 (한국어/영어)
- 접근성 기능 (시각/청각 장애 지원)
